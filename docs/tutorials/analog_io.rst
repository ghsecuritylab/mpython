模拟IO
===============

本章节介绍了I/O引脚的模拟输入输出。模拟输入是将模拟信号转换为数字信号，简称ADC。模拟输出是通过IO引脚输出脉宽调制信号，输出指定的电压值，简称PWM。

模拟输入
--------

创建引脚对象::
    
    >>> from mpython import *
    >>> p0=MPythonPin(0,PinMode.ANALOG)


.. Note::
 
    以上配置引脚0，``mode`` 为 ``PinMode.ANALOG`` ，即模拟输入模式。


读模拟输入::

    >>> p0.read_analog()
    >>>0
    >>> p0.read_analog()
    >>>4095

.. Note::

    因为adc采样数据宽度为12bit，所以满量程为4095。

接下来，你可以在引脚0，接入阻性的电子器件，如光敏、热敏电阻。观察测量的输入值变化。


模拟输出
--------

输出2V电压::

    >>> p0=MPythonPin(0,PinMode.PWM)
    p0.write_analog(int(2/3.3*1023))    

.. Note::

    由于IO引脚电压为3.3V，我们需要输出电压为2V。因此，映射值是2/3*1023。
    由于计算出来的为浮点型数，我们还需要使用 ``int()`` 转成整型。


